---
title: "SDG Combining report"
author: "Michael Rahija"
date: "July 12, 2019"
output:
  html_document: default
  pdf_document: default
editor_options:
  chunk_output_type: console
---

# Report to combine datasets

## Load package 
```{r }
#set up
knitr::opts_chunk$set(echo = T, warning=F, message = F)
library(FAOSDGdata)
library(dplyr)

```

### Download single dataset through API

```{r }
sdg <- getData("2.1.1", 
               source = "web")

head(sdg)
```

### Download multiples SDG datasets

```{r }
allSdgs <- getDatasets(all = T)

head(allSdgs)

```


### Clean single dataset to have easier column names, consistent classes, and only keep columns needed for analysis.
```{r }
cleandf <- getData("2.1.2", 
                  source = "web") %>%
           cleanData()

head(cleandf)
```

### Get all dataset, clean them, merge into single datafarme
```{r }
cleanall <- lapply(allSdgs, cleanData)

sdgsdf <- do.call("rbind", cleanall)

nrow(sdgsdf)
head(sdgsdf)

```


### Tabulate to check for consistent naming focusing on areacodes and names
```{r }
areas <- sdgsdf %>% 
              group_by(areacode, areaname) %>% 
              summarize(n = n()) %>% 
              as.data.frame()

areas$areaname <- substr(areas$areaname, start = 1, stop = 25)

areas

```

### Tabulate to check for units
```{r }

sdgsdf %>% 
      group_by(unit) %>% 
      summarize(n = n())

```

# Added line of code to test update from home.